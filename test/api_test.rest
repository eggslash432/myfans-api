# === MyFans Clone API quick test (httpYac) ===
# 使い方:
# 1) VS Code に httpYac REST Client 拡張を入れる
# 2) 下の @baseUrl を正しい API URL に設定
# 3) signup でユーザー作成 → login で JWT を取得 → @token にコピー
# 4) 各リクエストの上に出る「Send Request」をクリック

@baseUrl = http://localhost:3000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjMzBkOTg0OC0yNjdiLTRiNDEtOTM3ZS03ODI1YzAyZjQ3YWEiLCJlbWFpbCI6InVzZXIxQGV4YW1wbGUuY29tIiwicm9sZSI6ImZhbiIsImlhdCI6MTc1OTIwMjcyMiwiZXhwIjoxNzU5MjA2MzIyfQ.7tEqsL0cvrJeB1jE9u0zLAQ-dHaEi21KBR46vX8T8VY

# ★必要に応じてメモ用変数
@creatorId = 
@planId = 
@postId = 

### ユーザー登録 (signup)
POST {{baseUrl}}/auth/signup
Content-Type: application/json

{
  "email": "user1@example.com",
  "password": "password123",
  "role": "fan"
}

### ログイン (login) → アクセストークン取得
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user1@example.com",
  "password": "password123"
}

# レスポンスの access_token をコピーして @token に貼る

### 0) 認証済ユーザー情報確認
GET {{baseUrl}}/auth/me
Authorization: Bearer {{token}}

### 1) クリエイター登録/申請
POST {{baseUrl}}/creators
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "publicName": "Sample Creator",        
  "displayName": "サンプル太郎",          
  "bio": "自己紹介です。",                 
  "bankAccount": {
    "bankName": "MUFG",
    "branch": "渋谷支店",
    "accountType": "ordinary",
    "accountNumber": "1234567",
    "accountHolder": "サンプルタロウ"
  },
  "kycDocuments": {                      
    "documentType": "driver_license",
    "documentNumber": "A123456789",
    "birthDate": "1990-01-01"
  }
}

### 2) 月額プラン作成
POST {{baseUrl}}/plans
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "スタンダードプラン",
  "priceMonthly": 800,
  "currency": "JPY",
  "description": "月4本の限定投稿＋DM返信",
  "visibility": "public"
}

### 3) 投稿作成（サブスク会員限定・テキストのみ）
POST {{baseUrl}}/posts
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "初回限定ポスト",
  "content": "はじめまして！ここでは限定コンテンツを配信します。",
  "contentType": "text",
  "visibility": "subscribers",
  "planId": "{{planId}}"
}

### 4) 投稿取得（確認用）
GET {{baseUrl}}/posts/{{postId}}
Authorization: Bearer {{token}}
